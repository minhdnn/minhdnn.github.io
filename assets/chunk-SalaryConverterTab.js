import{r as h,j as e,m as j,S as _,_ as V}from"./app.js";import{S as L}from"./chunk-Section.js";const p=({label:u,value:C,isPrimary:b=!1,boldValue:w=!1})=>e.jsxs("div",{className:`flex justify-between items-center text-sm py-1.5 ${b?"text-lg":""}`,children:[e.jsx("span",{className:`${b?"font-semibold text-white":"text-slate-400"}`,children:u}),e.jsx("strong",{className:`${b||w?"text-white font-semibold":"text-slate-200"}`,children:C})]}),ae=()=>{const[u,C]=h.useState("grossToNet"),[b,w]=h.useState(""),[k,O]=h.useState(0),[S,W]=h.useState("I"),[d,M]=h.useState("actual"),[x,R]=h.useState(""),[r,f]=h.useState(null),$=11e6,P=44e5,z={I:496e4,II:441e4,III:386e4,IV:344e4},X=20,E=468e5,N={SI:.08,HI:.015,UI:.01},y=t=>t?Number(t.replace(/\./g,"").replace(",",".")):0,m=(t,s="₫")=>isNaN(t)?`0 ${s}`:t.toLocaleString("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0})+` ${s}`,H=t=>{if(t<=0)return 0;let s=0;return t<=5e6?s=t*.05:t<=1e7?s=25e4+(t-5e6)*.1:t<=18e6?s=75e4+(t-1e7)*.15:t<=32e6?s=195e4+(t-18e6)*.2:t<=52e6?s=475e4+(t-32e6)*.25:t<=8e7?s=975e4+(t-52e6)*.3:s=1815e4+(t-8e7)*.35,Math.round(s)},F=t=>{const s=[];if(t<=0)return s;const a=l=>m(l,"₫");let i=0;const o=[{type:"upTo",threshold:0,limit:5e6,rate:.05,label:(l,n)=>`Up to ${a(n)} (Rate: 5%)`},{type:"range",threshold:5e6,limit:1e7,rate:.1,label:(l,n)=>`> ${a(l)} to ${a(n)} (Rate: 10%)`},{type:"range",threshold:1e7,limit:18e6,rate:.15,label:(l,n)=>`> ${a(l)} to ${a(n)} (Rate: 15%)`},{type:"range",threshold:18e6,limit:32e6,rate:.2,label:(l,n)=>`> ${a(l)} to ${a(n)} (Rate: 20%)`},{type:"range",threshold:32e6,limit:52e6,rate:.25,label:(l,n)=>`> ${a(l)} to ${a(n)} (Rate: 25%)`},{type:"range",threshold:52e6,limit:8e7,rate:.3,label:(l,n)=>`> ${a(l)} to ${a(n)} (Rate: 30%)`},{type:"above",threshold:8e7,limit:1/0,rate:.35,label:(l,n)=>`> ${a(l)} to ... (Rate: 35%)`}];for(const l of o){if(t<=l.threshold&&l.type!=="upTo")continue;let n=0;if(l.type==="above"?n=Math.max(0,t-l.threshold):n=Math.max(0,Math.min(t,l.limit)-l.threshold),n>0){const c=n*l.rate,g=l.label(l.threshold,l.limit);s.push(e.jsxs("p",{className:"text-sm",children:[g,": ",e.jsx("strong",{className:"text-slate-200",children:a(c)})]},`pit-step-${i++}`))}if(t<=l.limit)break}return s},G=(t,s,a,i)=>{const o=z[s],l=o*X;let n;a==="actual"?n=t:a==="regionalMinimum"?n=o:a==="custom"&&i!==void 0?n=Math.max(0,i):n=0,n=Math.max(0,n);const c=Math.min(n,E),g=Math.min(n,E),U=Math.min(n,l),I=Math.round(c*N.SI),v=Math.round(g*N.HI),B=Math.round(U*N.UI),D=I+v+B;return{si:I,hi:v,ui:B,total:D}},A=t=>{const s=d==="custom"?y(x):void 0,a=G(t,S,d,s),i=t-a.total,o=$+k*P,l=Math.max(0,i-o),n=H(l),c=t-a.total-n,g=F(l);return{grossSalary:t,netSalary:c,si:a.si,hi:a.hi,ui:a.ui,totalSHUI:a.total,taxableIncomeForPIT:l,pit:n,pitBreakdown:g}},q=t=>{let s=t/(1-N.SI-N.HI-N.UI-.15);t<5e6&&(s=t);const a=50,i=1;for(let l=0;l<a;l++){const n=d==="custom"?y(x):void 0,c=G(s,S,d,n),g=s-c.total,U=$+k*P,I=Math.max(0,g-U),v=H(I),B=s-c.total-v;if(Math.abs(B-t)<i){const D=F(I);return{grossSalary:Math.round(s),netSalary:t,si:c.si,hi:c.hi,ui:c.ui,totalSHUI:c.total,taxableIncomeForPIT:I,pit:v,pitBreakdown:D}}s=t+c.total+v}const o=A(s);return{...o,grossSalary:Math.round(s),netSalary:o.netSalary}},J=t=>{const s=t.target.value.replace(/[^0-9]/g,"");if(s==="")w("");else try{const a=BigInt(s),i=new Intl.NumberFormat("vi-VN").format(a);w(i)}catch{w(s)}f(null)},K=t=>{const s=t.target.value.replace(/[^0-9]/g,"");if(s==="")R("");else try{const a=BigInt(s),i=new Intl.NumberFormat("vi-VN").format(a);R(i)}catch{R(s)}f(null)},Q=t=>{const s=parseInt(t.target.value,10);O(isNaN(s)||s<0?0:s),f(null)},Y=()=>{const t=y(b);if(isNaN(t)||t<=0){V.error("Please enter a valid salary amount.");return}if(d==="custom"){const a=y(x);if((isNaN(a)||a<0)&&t>0){V.error("Please enter a valid custom SHUI base amount.");return}}const s=new Promise((a,i)=>{setTimeout(()=>{try{let o;u==="grossToNet"?o=A(t):o=q(t),a(o)}catch(o){i(o)}},500)});V.promise(s,{loading:"Calculating...",success:a=>(f(a),"Calculation successful!"),error:"An error occurred during calculation."})},Z=()=>y(b)<=0||d==="custom"&&y(x)<=0;h.useEffect(()=>{f(null)},[u,k,S,d,x]);const T="w-full p-3 rounded-lg bg-slate-800/60 border border-slate-600/80 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 text-slate-100 transition-colors",ee=`${T} appearance-none bg-no-repeat bg-right`;return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Salary Converter (Vietnam - 2025 Est.)",icon:e.jsx(_,{}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Conversion Type"}),e.jsxs("div",{className:"flex space-x-2 sm:space-x-4 bg-slate-800/40 p-1.5 rounded-full",children:[e.jsxs(j.button,{onClick:()=>{C("grossToNet")},className:`relative w-1/2 py-2 text-sm font-semibold rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${u==="grossToNet"?"text-white":"text-slate-300 hover:text-white"}`,children:[u==="grossToNet"&&e.jsx(j.div,{layoutId:"salary-bubble",className:"absolute inset-0 bg-slate-700 rounded-full",transition:{type:"spring",stiffness:300,damping:25}}),e.jsx("span",{className:"relative z-10",children:"Gross to Net"})]}),e.jsxs(j.button,{onClick:()=>{C("netToGross")},className:`relative w-1/2 py-2 text-sm font-semibold rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${u==="netToGross"?"text-white":"text-slate-300 hover:text-white"}`,children:[u==="netToGross"&&e.jsx(j.div,{layoutId:"salary-bubble",className:"absolute inset-0 bg-slate-700 rounded-full",transition:{type:"spring",stiffness:300,damping:25}}),e.jsx("span",{className:"relative z-10",children:"Net to Gross"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salaryInput",className:"block text-sm font-semibold text-slate-300 mb-2",children:u==="grossToNet"?"Gross Salary (VND)":"Net Salary (VND)"}),e.jsx("input",{type:"text",id:"salaryInput",value:b,onChange:J,placeholder:"e.g., 25.000.000",className:T,inputMode:"numeric","aria-label":u==="grossToNet"?"Gross Salary in VND":"Net Salary in VND"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dependents",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Number of Dependents"}),e.jsx("input",{type:"number",id:"dependents",value:k,onChange:Q,min:"0",className:T,"aria-label":"Number of dependents for tax deduction"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"region",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Insurance Region (Vùng - for 2025 est. UI Cap & Min. Wage Base)"}),e.jsxs("select",{id:"region",value:S,onChange:t=>{W(t.target.value),f(null)},className:ee,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2394a3b8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`},"aria-label":"Select insurance region for 2025 estimated UI Cap and Minimum Wage base",children:[e.jsx("option",{value:"I",children:"Region I (Vùng I - e.g., Hanoi, HCMC urban)"}),e.jsx("option",{value:"II",children:"Region II (Vùng II - e.g., Da Nang, Can Tho)"}),e.jsx("option",{value:"III",children:"Region III (Vùng III - Provincial cities)"}),e.jsx("option",{value:"IV",children:"Region IV (Vùng IV - Remaining areas)"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Note: Uses estimated 2025 regional minimums for UI cap and 'Regional Minimum Wage' option, based on provided formulas."})]}),e.jsxs("div",{children:[e.jsx("span",{id:"shuiBaseLabel",className:"block text-sm font-semibold text-slate-300 mb-2",children:"SHUI Paid On"}),e.jsxs("div",{className:"flex flex-col space-y-2",role:"radiogroup","aria-labelledby":"shuiBaseLabel",children:[e.jsxs("label",{className:"flex items-center text-slate-300 cursor-pointer p-3 rounded-lg bg-slate-800/40 has-[:checked]:bg-slate-700/80 has-[:checked]:ring-2 has-[:checked]:ring-white/70 transition-all duration-300",children:[e.jsx("input",{type:"radio",name:"shuiBaseType",value:"actual",checked:d==="actual",onChange:()=>{M("actual")},className:"mr-3 h-4 w-4 text-white border-white/50 focus:ring-white bg-transparent"}),"Actual Salary (capped by 2025 est. limits)"]}),e.jsxs("label",{className:"flex items-center text-slate-300 cursor-pointer p-3 rounded-lg bg-slate-800/40 has-[:checked]:bg-slate-700/80 has-[:checked]:ring-2 has-[:checked]:ring-white/70 transition-all duration-300",children:[e.jsx("input",{type:"radio",name:"shuiBaseType",value:"regionalMinimum",checked:d==="regionalMinimum",onChange:()=>{M("regionalMinimum")},className:"mr-3 h-4 w-4 text-white border-white/50 focus:ring-white bg-transparent"}),"Regional Minimum Wage (2025 est.)"]}),e.jsxs("label",{className:"flex items-center text-slate-300 cursor-pointer p-3 rounded-lg bg-slate-800/40 has-[:checked]:bg-slate-700/80 has-[:checked]:ring-2 has-[:checked]:ring-white/70 transition-all duration-300",children:[e.jsx("input",{type:"radio",name:"shuiBaseType",value:"custom",checked:d==="custom",onChange:()=>{M("custom")},className:"mr-3 h-4 w-4 text-white border-white/50 focus:ring-white bg-transparent"}),"Custom Amount (capped by 2025 est. limits)"]})]}),d==="custom"&&e.jsxs(j.div,{className:"mt-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx("label",{htmlFor:"customShuiBaseInput",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Custom SHUI Base Amount (VND)"}),e.jsx("input",{type:"text",id:"customShuiBaseInput",value:x,onChange:K,placeholder:"e.g., 10.000.000",className:T,inputMode:"numeric","aria-label":"Custom SHUI base amount in VND"})]})]}),e.jsx("div",{children:e.jsx(j.button,{onClick:Y,disabled:Z(),whileHover:{scale:1.02,boxShadow:"0 0 15px rgba(56, 189, 248, 0.2)",borderColor:"rgba(56, 189, 248, 0.4)"},whileTap:{scale:.98},className:"w-full bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/40 backdrop-blur-sm text-sky-200 font-semibold py-3 px-4 rounded-lg shadow-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none","aria-live":"polite",children:"Calculate"})})]})}),r&&e.jsx(L,{title:"Calculation Results (2025 Est.)",icon:e.jsx(_,{}),children:e.jsxs("div",{className:"space-y-2 text-slate-300 bg-slate-900/30 p-6 rounded-lg border border-slate-700/50",children:[e.jsx(p,{label:"Gross Salary:",value:m(r.grossSalary),isPrimary:u==="netToGross"}),e.jsx(p,{label:"Net Salary:",value:m(r.netSalary),isPrimary:u==="grossToNet"}),e.jsx("hr",{className:"border-slate-700/60 my-3"}),e.jsx(p,{label:"Social Insurance (8%):",value:m(r.si)}),e.jsx(p,{label:"Health Insurance (1.5%):",value:m(r.hi)}),e.jsx(p,{label:"Unemployment Insurance (1%):",value:m(r.ui)}),e.jsx(p,{label:"Total SHUI Contributions:",value:m(r.totalSHUI),boldValue:!0}),e.jsx("hr",{className:"border-slate-700/60 my-3"}),e.jsx(p,{label:"Taxable Income (for PIT):",value:m(r.taxableIncomeForPIT)}),e.jsx(p,{label:"Personal Income Tax (PIT):",value:m(r.pit),boldValue:!0}),r.pit>0&&r.pitBreakdown&&r.pitBreakdown.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700/60",children:[e.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:"PIT Calculation Breakdown:"}),e.jsx("div",{className:"space-y-1",children:r.pitBreakdown})]})]})})]})};export{ae as default};
