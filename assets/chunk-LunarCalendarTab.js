import{r as f,j as n,u as A,f as V,R as B,m as k,d as K}from"./app.js";import{S as F}from"./chunk-Section.js";const{floor:x,sin:b,PI:T}=Math,E=(t,l,e)=>{const o=x((14-l)/12),a=e+4800-o,s=l+12*o-3;let r=t+x((153*s+2)/5)+365*a+x(a/4)-x(a/100)+x(a/400)-32045;return r<2299161&&(r=t+x((153*s+2)/5)+365*a+x(a/4)-32083),r},P=t=>{let l,e,o;t>2299160?(l=t+32044,e=x((4*l+3)/146097),o=l-x(e*146097/4)):(e=0,o=t+32082);const a=x((4*o+3)/1461),s=o-x(1461*a/4),r=x((5*s+2)/153),u=s-x((153*r+2)/5)+1,m=r+3-12*x(r/10),i=e*100+a-4800+x(r/10);return{day:u,month:m,year:i}},G=t=>{const l=t/1236.85,e=l*l,o=e*l,a=Math.PI/180;let s=241502075933e-5+29.53058868*t+1178e-7*e-155e-9*o;s=s+33e-5*b((166.56+132.87*l-.009173*e)*a);const r=359.2242+29.10535608*t-333e-7*e-347e-8*o,u=306.0253+385.81691806*t+.0107306*e+1236e-8*o,m=21.2964+390.67050646*t-.0016528*e-239e-8*o;let i=(.1734-393e-6*l)*b(r*a)+.0021*b(2*a*r);i=i-.4068*b(u*a)+.0161*b(a*2*u),i=i-4e-4*b(a*3*u),i=i+.0104*b(a*2*m)-.0051*b(a*(r+u)),i=i-.0074*b(a*(r-u))+4e-4*b(a*(2*m+r)),i=i-4e-4*b(a*(2*m-r))-6e-4*b(a*(2*m+u)),i=i+.001*b(a*(2*m-u))+5e-4*b(a*(2*u+r));const d=c=>{let h;const g=c*c,p=g*c;return c<-11?h=.001+839e-6*c+2261e-7*g-845e-8*p-81e-9*c*p:h=-.00278+.00265*c+.00262*g,h};return s+i-d(l)},W=t=>{const l=(t-2451545)/36525,e=l*l,o=T/180,a=357.5291+35999.0503*l-1559e-7*e-48e-8*l*e,s=280.46645+36000.76983*l+3032e-7*e;let r=(1.9146-.004817*l-14e-6*e)*Math.sin(o*a);r=r+(.019993-101e-6*l)*Math.sin(o*2*a)+29e-5*Math.sin(o*3*a);let u=s+r;return u=u*o,u=u-T*2*x(u/(T*2)),u},L=(t,l)=>x(W(t-.5-l/24)/T*6),w=(t,l)=>x(G(t)+.5+l/24),D=(t,l)=>{const e=E(31,12,t)-2415021,o=x(e/29.530588853);let a=w(o,l);return L(a,l)>=9&&(a=w(o-1,l)),a},H=(t,l)=>{const e=x((t-2415021076998695e-9)/29.530588853+.5);let o=0,a=1,s=L(w(e+a,l),l);do o=s,a++,s=L(w(e+a,l),l);while(s!=o&&a<14);return a-1},z=(t,l,e,o)=>{const a=E(t,l,e),s=x((a-2415021076998695e-9)/29.530588853);let r=w(s+1,o);r>a&&(r=w(s,o));let u=D(e,o),m=u,i;u>r?(i=e,u=D(e-1,o)):(i=e+1,m=D(e+1,o));const d=a-r+1,y=x((r-u)/29);let c=!1,h=y+11,g;return m-u>365&&(g=H(u,o),y>=g&&(h=y+10,y==g&&(c=!0))),h>12&&(h=h-12),h>=11&&y<4&&(i-=1),{lunarDay:d,lunarMonth:h,lunarYear:i,lunarLeap:c}},q=(t,l,e,o,a)=>{let s,r;l<11?(s=D(e-1,a),r=D(e,a)):(s=D(e,a),r=D(e+1,a));const u=x(.5+(s-2415021076998695e-9)/29.530588853);let m=l-11;m<0&&(m+=12);let i,d;if(r-s>365){if(i=H(s,a),d=i-2,d<0&&(d+=12),o&&l!=d)return{day:0,month:0,year:0};(o||m>=i)&&(m+=1)}const y=w(u+m,a);return P(y+t-1)},J=["Canh","Tân","Nhâm","Quý","Giáp","Ất","Bính","Đinh","Mậu","Kỷ"],Q=["Thân","Dậu","Tuất","Hợi","Tý","Sửu","Dần","Mão","Thìn","Tỵ","Ngọ","Mùi"],U=t=>({can:J[t%10],chi:Q[t%12]}),R=(t,l,e,o=7)=>{const{lunarDay:a,lunarMonth:s,lunarYear:r,lunarLeap:u}=z(t,l,e,o),{can:m,chi:i}=U(r);return{day:a,month:s,year:r,leap:u,lunarDate:a,lunarMonth:s,lunarYear:r,can:m,chi:i}},X=(t,l,e,o=!1,a=7)=>q(t,l,e,o,a),Z=["CN","T2","T3","T4","T5","T6","T7"],Y=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],ee=Array.from({length:12},(t,l)=>`Tháng ${l+1}`),te={Tý:"Chuột 🐭",Sửu:"Trâu 🐃",Dần:"Hổ 🐅",Mão:"Mèo 🐈",Thìn:"Rồng 🐉",Tỵ:"Rắn 🐍",Ngọ:"Ngựa 🐎",Mùi:"Dê 🐐",Thân:"Khỉ 🐒",Dậu:"Gà 🐓",Tuất:"Chó 🐕",Hợi:"Heo 🐖"},N="w-full p-2.5 rounded-lg bg-slate-800/60 border border-slate-600/80 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 text-slate-100 transition-colors",ne=`${N} appearance-none bg-no-repeat bg-right`,I="w-full sm:w-auto bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/40 backdrop-blur-sm text-sky-200 font-semibold py-2.5 px-4 rounded-lg shadow-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",C=t=>R(t.getDate(),t.getMonth()+1,t.getFullYear()),j=t=>isNaN(t.getTime())?"N/A":`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`,ae=({currentDate:t,onPrev:l,onNext:e,onGoToToday:o,onMonthChange:a,yearInput:s,onYearInputChange:r,onYearInputBlur:u,onYearInputKeyDown:m})=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 p-4 bg-slate-800/40 rounded-xl border border-slate-700/60",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-white/10 transition-colors","aria-label":"Tháng trước",children:"‹"}),n.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-semibold bg-slate-700 hover:bg-slate-600 rounded-full transition-colors",children:"Hôm nay"}),n.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 transition-colors","aria-label":"Tháng sau",children:"›"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("select",{value:t.getMonth(),onChange:i=>a(parseInt(i.target.value,10)),"aria-label":"Chọn tháng",className:`${ne} w-32`,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2394a3b8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`},children:ee.map((i,d)=>n.jsx("option",{value:d,children:i},i))}),n.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:r,onBlur:u,onKeyDown:m,"aria-label":"Chọn năm",className:`${N} w-28`})]})]}),se=({day:t,isToday:l,isCurrentMonth:e,isSelected:o,onClick:a})=>{const s=C(t),r=t.getDay()===0,u=t.getDay()===6;let m="bg-slate-800/50 border-slate-700/50 hover:bg-slate-700/50",i="text-slate-200";e?(r&&(m="bg-rose-900/30 border-slate-700/50 hover:bg-rose-900/60",i="text-rose-300"),u&&(m="bg-indigo-900/30 border-slate-700/50 hover:bg-indigo-900/60",i="text-indigo-300"),l&&(m="bg-green-900/40 border-green-500",i="text-green-300"),o&&(m="bg-sky-500/20 border-sky-500 shadow-[0_0_15px_rgba(56,189,248,0.2)]",i="text-sky-300")):(m="bg-slate-900/30 border-slate-800/40",i="text-slate-700");const d=`relative aspect-square flex flex-col items-center justify-center p-2 rounded-lg cursor-pointer transition-all duration-200 border-2 ${m}`,y=`text-xl font-bold ${i}`,c=`${s.day===1?`${s.day}/${s.month}`:s.day}${s.leap?"*":""}`,h=`text-sm mt-1 ${e?s.day===1?"text-amber-400 font-bold":"text-slate-500":"text-slate-700"}`;return n.jsxs("div",{className:d,onClick:a,children:[n.jsx("span",{className:y,children:t.getDate()}),n.jsx("span",{className:h,children:c})]})},le=({selectedDate:t,setSelectedDate:l})=>{const[e,o]=f.useState(new Date),[a,s]=f.useState(()=>String(new Date().getFullYear()));f.useEffect(()=>{s(String(e.getFullYear()))},[e]);const r=c=>{l(c)},u=()=>{const c=new Date;o(c),l(c)},m=c=>{const h=c.target.value.replace(/[^0-9]/g,"");h.length<=4&&s(h)},i=()=>{const c=parseInt(a,10);!isNaN(c)&&c>=1900&&c<=2100?o(new Date(c,e.getMonth(),1)):s(String(e.getFullYear()))},d=c=>{c.key==="Enter"&&(i(),c.currentTarget.blur())},y=f.useMemo(()=>{const c=new Date;c.setHours(0,0,0,0);const h=[],g=e.getFullYear(),p=e.getMonth(),S=new Date(g,p,1),M=new Date(g,p+1,0),$=S.getDay();for(let v=$;v>0;v--)h.push({date:new Date(g,p,1-v),isCurrentMonth:!1});for(let v=1;v<=M.getDate();v++)h.push({date:new Date(g,p,v),isCurrentMonth:!0,isToday:new Date(g,p,v).getTime()===c.getTime()});const _=(h.length>35?42:35)-h.length;for(let v=1;v<=_;v++)h.push({date:new Date(g,p+1,v),isCurrentMonth:!1});return h},[e]);return n.jsxs("div",{children:[n.jsx(ae,{currentDate:e,onPrev:()=>o(new Date(e.getFullYear(),e.getMonth()-1,1)),onNext:()=>o(new Date(e.getFullYear(),e.getMonth()+1,1)),onGoToToday:u,onMonthChange:c=>o(new Date(e.getFullYear(),c,1)),yearInput:a,onYearInputChange:m,onYearInputBlur:i,onYearInputKeyDown:d}),n.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Z.map(c=>n.jsx("div",{className:"text-center font-bold text-slate-400 text-xl pb-2",children:c},c)),y.map(({date:c,isCurrentMonth:h,isToday:g},p)=>n.jsx(se,{day:c,isToday:!!g,isCurrentMonth:h,isSelected:(t==null?void 0:t.getTime())===c.getTime(),onClick:()=>r(c)},p))]})]})},oe=({date:t})=>{const l=f.useMemo(()=>`${Y[t.getDay()]}, ngày ${t.getDate()} tháng ${t.getMonth()+1} năm ${t.getFullYear()}`,[t]),e=f.useMemo(()=>{const o=C(t);return`Tức ngày ${o.day} tháng ${o.month}${o.leap?" (nhuận)":""} năm ${o.year} (${o.can} ${o.chi})`},[t]);return n.jsxs("div",{className:"text-center p-4 bg-slate-900/50 rounded-lg border border-slate-700/80 mt-6",children:[n.jsx("p",{className:"text-lg font-semibold text-white",children:l}),n.jsx("p",{className:"text-md text-sky-300",children:e})]})},re=()=>{const[t,l]=f.useState(""),[e,o]=f.useState(null),a=()=>{if(!t)return;const s=new Date(t);if(isNaN(s.getTime()))return;const r=new Date;r.setHours(0,0,0,0);const u=Math.floor((r.getTime()-s.getTime())/(1e3*60*60*24)),m=Math.floor(u/7),i=u*24,d=(7-s.getDay())%7;let y=0;u>=d&&(y=1+Math.floor((u-d)/7));const c=(M,$)=>new Date(M.getTime()+$*24*60*60*1e3),h=r.getFullYear()-s.getFullYear()-(r.getMonth()<s.getMonth()||r.getMonth()===s.getMonth()&&r.getDate()<s.getDate()?1:0),g=C(s),S=C(r).lunarYear-g.lunarYear;o({daysLived:u,weeksLived:m,hoursLived:i,sundaysPassed:y,gregorianAge:h,lunarAge:S,milestone1000:j(c(s,1e3)),milestone5000:j(c(s,5e3)),milestone10000:j(c(s,1e4)),milestone20000:j(c(s,2e4)),milestone30000:j(c(s,3e4)),birthDayOfWeek:Y[s.getDay()],lunarBirthDate:`${g.day}/${g.month}/${g.lunarYear} (${g.can} ${g.chi})`,canChi:`${g.can} ${g.chi}`,zodiac:te[g.chi]||"N/A"})};return n.jsx(F,{title:"Fun Facts Generator",icon:n.jsx(V,{}),children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center p-4 bg-slate-800/40 rounded-xl border border-slate-700/60 mb-6",children:[n.jsx("label",{htmlFor:"birthdate-input",className:"text-slate-300 font-medium whitespace-nowrap",children:"Nhập ngày sinh của bạn:"}),n.jsx("input",{type:"date",id:"birthdate-input",value:t,onChange:s=>l(s.target.value),max:new Date().toISOString().split("T")[0],className:`${N} flex-grow`}),n.jsx("button",{onClick:a,className:`${I} w-full sm:w-auto`,children:"OK"})]}),e&&n.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},className:"p-6 bg-slate-800/60 rounded-xl border border-slate-700/80",children:[n.jsx("h3",{className:"text-2xl font-bold text-white text-center mb-6",children:"🎉 Fun Facts Về Bạn 🎂"}),n.jsx("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[{label:"Tuổi dương lịch",value:`${e.gregorianAge} tuổi`},{label:"Tuổi âm lịch (ước tính)",value:`${e.lunarAge} tuổi`},{label:"Can chi năm sinh",value:e.canChi},{label:"Con giáp",value:e.zodiac},{label:"Ngày sinh (âm lịch)",value:e.lunarBirthDate},{label:"Sinh vào",value:e.birthDayOfWeek},{label:"Số ngày đã sống",value:`${e.daysLived.toLocaleString("vi-VN")} ngày`},{label:"Số tuần đã sống",value:`${e.weeksLived.toLocaleString("vi-VN")} tuần`},{label:"Số giờ đã sống",value:`${e.hoursLived.toLocaleString("vi-VN")} giờ`},{label:"Số Chủ Nhật đã qua",value:e.sundaysPassed.toLocaleString("vi-VN")},{label:"Mốc 1,000 ngày",value:e.milestone1000},{label:"Mốc 5,000 ngày",value:e.milestone5000},{label:"Mốc 10,000 ngày",value:e.milestone10000},{label:"Mốc 20,000 ngày",value:e.milestone20000},{label:"Mốc 30,000 ngày",value:e.milestone30000}].map(s=>n.jsxs("div",{className:"flex justify-between border-b border-slate-700/50 py-2",children:[n.jsx("dt",{className:"text-slate-400",children:s.label}),n.jsx("dd",{className:"text-white font-semibold text-right",children:s.value})]},s.label))})]})]})})},O=({title:t,children:l})=>n.jsxs("div",{className:"p-6 bg-slate-800/40 rounded-xl border border-slate-700/60 flex flex-col gap-4",children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:t}),l]}),ce=()=>{const[t,l]=f.useState({day:new Date().getDate(),month:new Date().getMonth()+1,year:new Date().getFullYear()}),[e,o]=f.useState({day:1,month:1,year:2024,isLeap:!1}),[a,s]=f.useState(""),[r,u]=f.useState(""),m=()=>{try{const{day:d,month:y,year:c}=t,h=R(d,y,c);s(`Ngày ${h.day}/${h.month}/${h.year} ${h.leap?"(nhuận)":""} (${h.can} ${h.chi})`)}catch{s("Ngày không hợp lệ")}},i=()=>{try{const{day:d,month:y,year:c,isLeap:h}=e,g=X(d,y,c,h);if(g.year===0)throw new Error("Invalid lunar date");const p=new Date(g.year,g.month-1,g.day);u(`${Y[p.getDay()]}, ngày ${g.day}/${g.month}/${g.year}`)}catch{u("Ngày không hợp lệ")}};return n.jsx(F,{title:"Date Converter",icon:n.jsx(B,{}),children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[n.jsxs(O,{title:"Dương sang Âm",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"number",placeholder:"Ngày",value:t.day,onChange:d=>l({...t,day:+d.target.value}),className:N}),n.jsx("input",{type:"number",placeholder:"Tháng",value:t.month,onChange:d=>l({...t,month:+d.target.value}),className:N}),n.jsx("input",{type:"number",placeholder:"Năm",value:t.year,onChange:d=>l({...t,year:+d.target.value}),className:N})]}),n.jsx("button",{onClick:m,className:I,children:"Chuyển đổi"}),a&&n.jsx("p",{className:"text-center font-semibold text-lg text-sky-300 bg-sky-900/20 p-3 rounded-lg",children:a})]}),n.jsxs(O,{title:"Âm sang Dương",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"number",placeholder:"Ngày",value:e.day,onChange:d=>o({...e,day:+d.target.value}),className:N}),n.jsx("input",{type:"number",placeholder:"Tháng",value:e.month,onChange:d=>o({...e,month:+d.target.value}),className:N}),n.jsx("input",{type:"number",placeholder:"Năm",value:e.year,onChange:d=>o({...e,year:+d.target.value}),className:N})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none text-slate-300 hover:text-white transition-colors",children:[n.jsx("input",{type:"checkbox",id:"isLeap",checked:e.isLeap,onChange:d=>o({...e,isLeap:d.target.checked}),className:"h-4 w-4 rounded bg-slate-600 border-white/50 text-white focus:ring-white"}),"Tháng nhuận"]}),n.jsx("button",{onClick:i,className:I,children:"Chuyển đổi"}),r&&n.jsx("p",{className:"text-center font-semibold text-lg text-sky-300 bg-sky-900/20 p-3 rounded-lg",children:r})]})]})})},de=()=>{const[t,l]=f.useState("calendar"),[e,o]=f.useState(new Date),a=[{id:"calendar",label:"Lịch Tháng",icon:A},{id:"funfacts",label:"Fun Facts",icon:V},{id:"converter",label:"Chuyển Đổi",icon:B}],s=()=>{switch(t){case"calendar":return n.jsxs(F,{title:"Lịch Âm Dương",icon:n.jsx(A,{}),children:[n.jsx(le,{selectedDate:e,setSelectedDate:o}),e&&n.jsx(oe,{date:e})]});case"funfacts":return n.jsx(re,{});case"converter":return n.jsx(ce,{});default:return null}};return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"flex space-x-1 bg-slate-800/40 p-1.5 rounded-full border border-slate-700",children:a.map(r=>n.jsxs("button",{onClick:()=>l(r.id),className:`relative flex items-center gap-x-2 w-full sm:w-auto px-4 py-2 text-sm font-semibold rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${t===r.id?"text-white":"text-slate-300 hover:text-white"}`,children:[t===r.id&&n.jsx(k.div,{layoutId:"lunar-calendar-bubble",className:"absolute inset-0 bg-slate-700 rounded-full",transition:{type:"spring",stiffness:300,damping:25}}),n.jsx(r.icon,{className:"relative z-10 w-5 h-5"}),n.jsx("span",{className:"relative z-10",children:r.label})]},r.id))})}),n.jsx(K,{mode:"wait",children:n.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:s()},t)})]})};export{de as default};
